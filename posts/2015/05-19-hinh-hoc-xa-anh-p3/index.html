<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Hình học xạ ảnh P3 - Kata learns to code</title><meta name=Description content="Welcome to my world - I talk to the wind"><meta property="og:url" content="/posts/2015/05-19-hinh-hoc-xa-anh-p3/">
<meta property="og:site_name" content="Kata learns to code"><meta property="og:title" content="Hình học xạ ảnh P3"><meta property="og:description" content="Trong phần trước chúng ta đã tìm hiểu về hệ tọa độ đồng nhất. Trong phần này, trước khi đi vào các phép biến đổi, chúng ta sẽ nói một chút về không gian xạ ảnh (projective space)."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-05-19T00:00:00+00:00"><meta property="article:modified_time" content="2015-05-19T00:00:00+00:00"><meta property="article:tag" content="ProjectiveGeometry"><meta property="og:image" content="/avatar.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/avatar.jpg"><meta name=twitter:title content="Hình học xạ ảnh P3"><meta name=twitter:description content="Trong phần trước chúng ta đã tìm hiểu về hệ tọa độ đồng nhất. Trong phần này, trước khi đi vào các phép biến đổi, chúng ta sẽ nói một chút về không gian xạ ảnh (projective space)."><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=referrer content="no-referrer"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=/posts/2015/05-19-hinh-hoc-xa-anh-p3/><link rel=prev href=/posts/2015/05-17-hinh-hoc-xa-anh-p2/><link rel=next href=/posts/2015/11-11-imperative-vs-declarative/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Hình học xạ ảnh P3","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"\/posts\/2015\/05-19-hinh-hoc-xa-anh-p3\/"},"genre":"posts","keywords":"ProjectiveGeometry","wordcount":2402,"url":"\/posts\/2015\/05-19-hinh-hoc-xa-anh-p3\/","datePublished":"2015-05-19T00:00:00+00:00","dateModified":"2015-05-19T00:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Nghia"},"description":""}</script></head><body data-header-desktop data-header-mobile><script>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"dark"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"dark"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Kata learns to code">Kata learns to code</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts>Posts </a><a class=menu-item href=/categories>Categories </a><a class=menu-item href=/tags>Tags </a><a class=menu-item href=https://github.com/katatunix/katatunix.github.io rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw'></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Kata learns to code">Kata learns to code</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts title>Posts</a><a class=menu-item href=/categories title>Categories</a><a class=menu-item href=/tags title>Tags</a><a class=menu-item href=https://github.com/katatunix/katatunix.github.io title rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw'></i></a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Hình học xạ ảnh P3</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Nghia</a></span>&nbsp;<span class=post-category>included in <a href=/categories/math/><i class="far fa-folder fa-fw" aria-hidden=true></i>Math</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime="May 19, 2015">May 19, 2015</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;2402 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;12 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#không-gian-xạ-ảnh>Không gian xạ ảnh</a></li><li><a href=#các-phép-biến-đổi-transformation>Các phép biến đổi (transformation)</a></li><li><a href=#translation>Translation</a></li><li><a href=#rotation-scaling-và-shearing>Rotation, scaling và shearing</a></li><li><a href=#projective-tranformation>Projective tranformation</a></li><li><a href=#những-thuật-ngữ-dễ-gây-nhầm-lẫn>Những thuật ngữ dễ gây nhầm lẫn</a></li><li><a href=#trở-lại-opengl-es-20>Trở lại OpenGL ES 2.0</a></li></ul></nav></div></div><div class=content id=content><p>Trong <a href=../05-17-hinh-hoc-xa-anh-p2/ rel>phần trước</a> chúng ta đã tìm hiểu về hệ tọa độ đồng nhất. Trong phần này, trước khi đi vào các phép biến đổi, chúng ta sẽ nói một chút về không gian xạ ảnh (projective space).</p><h2 id=không-gian-xạ-ảnh>Không gian xạ ảnh</h2><p>Không gian xạ ảnh là một tập hợp gồm nhiều mặt phẳng xạ ảnh. Không gian này có những tính chất sau:</p><ul><li>Qua hai mặt phẳng xác định duy nhất một đường thẳng.</li><li>Hai mặt phẳng song song có chung một đường thẳng ở vô tận.</li><li>Tất cả các điểm ở vô tận &ndash; cũng tức là tất cả các đường thẳng ở vô tận &ndash; cùng nằm trên một mặt phẳng gọi là mặt phẳng ở vô tận.</li></ul><p>Mỗi điểm trong không gian sẽ có tọa độ $(x, y, z, w)$. Tương tự như trong mặt phẳng xạ ảnh, $w = 0$ ám chỉ điểm ở vô tận theo hướng $(x, y, z)$; còn với $w = 1$ thì $(x, y, z)$ là tọa độ điểm tương ứng trong không gian 3D Euclide.</p><h2 id=các-phép-biến-đổi-transformation>Các phép biến đổi (transformation)</h2><p>Một trong những cách để phân biệt các thể loại hình học là những phép biến đổi và các tính chất được bảo toàn sau những phép biến đổi đó:</p><ul><li><a href=http://en.wikipedia.org/wiki/Euclidean_geometry target=_blank rel="noopener noreffer">Hình học Euclide</a> có các phép translation và rotation; gọi chung là Euclide transformation. Góc và độ dài (khoảng cách) được bảo toàn.</li><li><a href=http://en.wikipedia.org/wiki/Affine_geometry target=_blank rel="noopener noreffer">Hình học affine</a> tổng quát hơn hình học Euclide, nó có thêm các phép scaling và shearing; gọi chung là affine transfomation. Sự song song được bảo toàn.</li><li><a href=http://en.wikipedia.org/wiki/Projective_geometry target=_blank rel="noopener noreffer">Hình học xạ ảnh</a> tổng quát hơn hình học affine, nó có thêm phép projective; gọi chung là projective transformation. Sự thẳng hàng được bảo toàn.</li></ul><p>Bây giờ chúng ta sẽ xem xét từng phép biến đổi: translation, rotation, scaling, shearing và projective trong hình học xạ ảnh. Chú ý rằng tất cả những phép này đều có thể gọi chung là projective được vì sự thẳng hàng đều được bảo toàn.</p><h2 id=translation>Translation</h2><p>Rất khó hình dung translation trong mặt phẳng xạ ảnh nếu không có mặt phẳng nhúng $\Omega$ (xem <a href=../05-17-hinh-hoc-xa-anh-p2/ rel>phần 2</a>). Phép translation $(a, b)$ sẽ biến đổi một điểm $(x, y, w)$ như sau:</p><p>$$(x, y, w) \mapsto (x/w, y/w, 1) \mapsto (x/w + a, y/w + b, 1) \mapsto (x + aw, y + bw, w)$$</p><p>Rút gọn là: $(x, y, w) \mapsto (x + aw, y + bw, w)$; công thức rút gọn này có thể áp dụng với $w = 0$; như vậy translation không làm thay đổi những điểm ở vô tận $(w = 0)$.</p><p>Điều thú vị là khi dùng ma trận để biểu diễn phép translation $(a, b)$, trong hình học Euclide cũng như affine không tồn tại ma trận $2 \times 2$ nào để biến một điểm $(x, y)$ thành $(x + a, y + b)$. Ví dụ gốc tọa độ $(0, 0)$ nhân với bất kỳ ma trận $2 \times 2$ nào cũng vẫn là chính nó $(0, 0)$; trong khi đó phép translation sẽ biến đổi tất cả các điểm bao gồm cả gốc tọa độ.</p><p>Và đây lại là một ưu điểm nữa của hình học xạ ảnh, dùng ma trận $3 \times 3$ sẽ biểu diễn được phép translation $(a, b)$ trên mặt phẳng xạ ảnh, ma trận này như sau:</p><p>$$\begin{pmatrix}
1 & 0 & a \\
0 & 1 & b \\
0 & 0 & 1
\end{pmatrix}$$</p><p>Tương tự như thế cho không gian xạ ảnh, mỗi điểm $(x, y, z, w)$ qua phép translation $(a, b, c)$ sẽ biến thành $(x + aw, y + bw, z + cw, w)$ nhờ nhân với ma trận:</p><p>$$\begin{pmatrix}
1 & 0 & 0 & a \\
0 & 1 & 0 & b \\
0 & 0 & 1 & c \\
0 & 0 & 0 & 1
\end{pmatrix}$$</p><h2 id=rotation-scaling-và-shearing>Rotation, scaling và shearing</h2><p>Đối với những phép này trong mặt phẳng xạ ảnh, chúng ta có thể sử dụng lại y chang ma trận $2 \times 2$ trong hình học Euclide và affine, chỉ thêm vào một dòng và một cột đơn giản để được ma trận $3 \times 3$ như sau:</p><p>$$\begin{pmatrix}
a & b & 0 \\
c & d & 0 \\
0 & 0 & 1
\end{pmatrix}$$</p><p>Tương tự cho không gian xạ ảnh.</p><p>Điều giống nhau ở các phép translation, rotation, scaling và shearing là chúng không làm thay đổi $w$, tức là những điểm bình thường vẫn bình thường, những điểm ở vô tận vẫn ở vô tận. Những phép này đều gọi chung là affine transformation.</p><h2 id=projective-tranformation>Projective tranformation</h2><p>Đây là chủ đề chính của chúng ta, phép biến đổi projective hoàn toàn có thể thay đổi $w$, nghĩa là có khả năng biến một điểm bình thường tới vô tận và ngược lại.</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fas fa-info-circle fa-fw" aria-hidden=true></i>Định nghĩa<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>Phép biến đổi projective là một song ánh (one-to-one mapping) biến điểm thành điểm, và bảo toàn sự thẳng hàng.</div></div></div><p>Do sự thẳng hàng được bảo toàn, nên phép biến đổi projective sẽ biến đường thẳng thành đường thẳng, và mặt phẳng thành mặt phẳng.</p><p>Ngoài ra còn những tính chất khác được bảo toàn là division ratio (với affine transformation) và <a href=http://en.wikipedia.org/wiki/Cross-ratio target=_blank rel="noopener noreffer">cross ratio</a> (với projective transformation) nhưng tôi sẽ không đi sâu vào những tính chất này.</p><p>Ta có 2 định lý sau đây:</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fas fa-info-circle fa-fw" aria-hidden=true></i>Định lý 1<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>Mọi phép projective trong mặt phẳng xạ ảnh đều có thể biểu diễn bởi một ma trận khả nghịch $3 \times 3$, và ma trận này là duy nhất. Chú ý: hai ma trận $A$, $B$ được gọi là giống nhau nếu tồn tại một số thực $k \ne 0$ sao cho $B = kA$ (hiển nhiên).</div></div></div><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fas fa-info-circle fa-fw" aria-hidden=true></i>Định lý 2<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>Trên cùng một mặt phẳng xạ ảnh, nếu ta xác định được tọa độ 4 điểm bất kỳ $(A, B, C, D)$ trong đó không có 3 điểm nào thẳng hàng, và cũng xác định được tọa độ 4 điểm ảnh của chúng $(A&rsquo;, B&rsquo;, C&rsquo;, D&rsquo;)$ qua một phép projective; thì phép projective đó là duy nhất. Nói cách khác là không có hai phép projective nào cùng biến $(A, B, C, D)$ thành $(A&rsquo;, B&rsquo;, C&rsquo;, D&rsquo;)$.</div></div></div><p>Việc chứng minh hai định lý trên nằm ngoài phạm vi bài viết này. Bạn đọc có thể tham khảo ở những <a href=http://www.amazon.com/Projective-Geometry-Applications-Computer-Graphics/dp/0137306490 target=_blank rel="noopener noreffer">tài liệu khác</a>.</p><p>Hai định lý trên có thể mở rộng cho không gian xạ ảnh. Ở định lý 1, lúc này ta cần một ma trận $4 \times 4$ để biểu diễn phép projective. Ở định lý 2, ta cần xác định 5 điểm trong đó không có 4 điểm nào đồng phẳng, cùng với 5 điểm ảnh của chúng.</p><h2 id=những-thuật-ngữ-dễ-gây-nhầm-lẫn>Những thuật ngữ dễ gây nhầm lẫn</h2><p>Khi làm việc với đồ họa 3D, chúng ta rất hay nghe những thuật ngữ như:</p><ul><li>central projection</li><li>perspective projection</li><li>perspective transformation</li><li>ortho projection</li><li>ortho transformation</li><li>projective transformation</li></ul><p>Phân biệt chúng như thế nào?</p><p>Trước hết, theo <a href=http://en.wikipedia.org/wiki/3D_projection target=_blank rel="noopener noreffer">wikipedia</a>, projection luôn là phép biến đổi từ nhiều chiều xuống ít chiều hơn. Ví dụ: projection biến đổi một vật thể 3D thành một hình phẳng trên một mặt phẳng 2D.</p><p><figure><a class=lightgallery href=/posts/2015/05-19-hinh-hoc-xa-anh-p3/view-frustum.png title=/posts/2015/05-19-hinh-hoc-xa-anh-p3/view-frustum.png data-thumbnail=/posts/2015/05-19-hinh-hoc-xa-anh-p3/view-frustum.png data-sub-html="<h2>Perspective projection vs. ortho projection</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/posts/2015/05-19-hinh-hoc-xa-anh-p3/view-frustum.png data-srcset="/posts/2015/05-19-hinh-hoc-xa-anh-p3/view-frustum.png, /posts/2015/05-19-hinh-hoc-xa-anh-p3/view-frustum.png 1.5x, /posts/2015/05-19-hinh-hoc-xa-anh-p3/view-frustum.png 2x" data-sizes=auto alt=/posts/2015/05-19-hinh-hoc-xa-anh-p3/view-frustum.png width=737 height=346></a><figcaption class=image-caption>Perspective projection vs. ortho projection</figcaption></figure></p><p>Central projection (phép chiếu xuyên tâm) và perspective projection (phép chiếu phối cảnh) là một. Ở phép projection này có một điểm trung tâm, từ đó phát ra các đường thẳng cắt các điểm trên vật thể 3D và sẽ cắt mặt phẳng 2D tại những điểm ảnh cần tìm.</p><p>Còn đối với ortho projection (phép chiếu song song) thì không có điểm trung tâm mà chỉ có những đường thẳng song song cùng đi theo một hướng nào đó, chúng cắt các điểm trên vật thể 3D và sẽ cắt mặt phẳng 2D tại những điểm ảnh cần tìm.</p><p>Có thể nói ở ortho projection, vẫn có điểm trung tâm nhưng điểm này nằm ở vô tận, do đó những đường thẳng phát ra từ nó sẽ song song với nhau. Trong ortho projection, tính song song vẫn được bảo toàn, vật thể không bị méo (biến dạng). Còn perspective projection thì ngược lại, tính song song không được bảo toàn, và vật thể sẽ bị méo.</p><p>Các phép projection không được gọi là projective transfomation vì chúng không phải là one-to-one mapping và cũng không bảo toàn tính thẳng hàng.</p><p>Tuy nhiên, perspective transformation và ortho transformation thì đích thị là những projective transfomation. Thực ra hai phép này là một, vì hình học xạ ảnh đối xử điểm bình thường và vô tận như nhau, cho nên điểm trung tâm dù ở vị trí bình thường (perspective) hay là ở vị trí vô tận (ortho) thì cũng không có gì khác nhau. Perspective/ortho transformation chỉ có thể biến một mặt phẳng này thành một mặt phẳng khác, chứ không thể biến nguyên một khối 3D (gồm nhiều mặt phẳng) lên một mặt phẳng khác như projection.</p><p>Perspective/ortho transformation là một trường hợp đặc biệt của projective transfomation: tất cả những đường thẳng đi qua điểm $A$ và điểm ảnh $A&rsquo;$ của nó đều đồng quy tại một điểm (điểm trung tâm).</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fas fa-info-circle fa-fw" aria-hidden=true></i>Định lý 3<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>Mọi projective transformation đều có thể phân rã thành một số hữu hạn các phép perspective/ortho transformation.</div></div></div><p>Một lần nữa, chứng minh của định lý này nằm ngoài phạm vi bài viết. Việc nêu ra nó chỉ mang tính chất tham khảo và không có ứng dụng gì nhiều vào OpenGL ES 2.0.</p><h2 id=trở-lại-opengl-es-20>Trở lại OpenGL ES 2.0</h2><p>Mục tiêu tối thượng của đồ họa 3D luôn là chiếu một vật thể 3D lên một mặt phẳng 2D.</p><p>Chúng ta không thể dùng các phép projection vì chúng làm mất đi thông tin về chiều sâu. Cũng không thể dùng các phép perspective/ortho transformation vì chúng không chiếu nguyên vật thể 3D lên mặt phẳng 2D.</p><p>Phương pháp mà OpenGL ES 2.0 sử dụng khá đặc biệt, trước hết nó sẽ áp dụng một phép biến đổi projective mà:</p><ul><li>Biến điểm trung tâm về một điểm ở vô tận, có tọa độ $(x, y, z, w) = (0, 0, 1, 0)$ tức là những đường thẳng phát ra từ nó tới vật thể sẽ song song với nhau và song song với trục $Oz$.</li><li>Biến hình chóp cụt (frustum, xem hình vẽ bên dưới) thành hình lập phương đơn vị có các tọa độ từ $(-1, -1, -1)$ tới $(1, 1, 1)$.</li></ul><p>Đây quả thực là một phép biến đổi projective rất tổng quát, nó bao gồm cả translation, rotation, scaling, shearing và projective.</p><p>Giờ thì mọi việc trở nên đơn giản hơn nhiều, với mỗi tọa độ $(x, y, z, w)$ thu được:</p><ul><li>Nếu $w \ne 0$ thì $(x/w, y/w)$ là toạ độ 2D của điểm này trên mặt phẳng chiếu 2D; còn $z/w$ là độ sâu của điểm, sẽ được lưu vào depth buffer và dùng cho depth test. Chú ý: OpenGL ES sẽ tiếp tục biến đổi theo tỷ lệ những con số $(x/w, y/w, z/w)$ này, tùy thuộc vào những giá trị mà chúng ta đã truyền vào <code>glViewport()</code> và <code>glDepthRange()</code>.</li><li>Nếu $w = 0$ thì đây được coi là điểm ở vô tận theo hướng $(x, y, z)$, tức là nằm ra ngoài hình lập phương đơn vị. Đối với tất cả những điểm nằm ngoài hình lập phương đơn vị (cho dù $w = 0$ hay $w \ne 0$), OpenGL ES sẽ phải tốn công sức để cắt xén (clip) và tạo ra những điểm mới nằm trên biên và bề mặt của hình lập phương; những điểm mới này dĩ nhiên có $w \ne 0$ và được đối xử như trường hợp trên.</li></ul><p><figure><a class=lightgallery href=/posts/2015/05-19-hinh-hoc-xa-anh-p3/o_frustum_3dview.png title=/posts/2015/05-19-hinh-hoc-xa-anh-p3/o_frustum_3dview.png data-thumbnail=/posts/2015/05-19-hinh-hoc-xa-anh-p3/o_frustum_3dview.png data-sub-html="<h2>Perspective projection with a frustum</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/posts/2015/05-19-hinh-hoc-xa-anh-p3/o_frustum_3dview.png data-srcset="/posts/2015/05-19-hinh-hoc-xa-anh-p3/o_frustum_3dview.png, /posts/2015/05-19-hinh-hoc-xa-anh-p3/o_frustum_3dview.png 1.5x, /posts/2015/05-19-hinh-hoc-xa-anh-p3/o_frustum_3dview.png 2x" data-sizes=auto alt=/posts/2015/05-19-hinh-hoc-xa-anh-p3/o_frustum_3dview.png width=447 height=348></a><figcaption class=image-caption>Perspective projection with a frustum</figcaption></figure></p><p>Còn một điều lăn tăn nho nhỏ trong phương pháp trên, đó là: sau khi tìm được tọa độ $(x, y)$ trên mặt phẳng $z = -1$, tại sao chúng ta không biến đổi ngược lại để có tọa độ $(x, y)$ trên mặt phẳng ban đầu $z = -near$? Mục tiêu của chúng ta là tìm tọa độ trên mặt phẳng $z = -near$ mà. Thực ra, mục tiêu cuối cùng không quan tâm đến tọa độ $(x, y)$ tìm được trên mặt phẳng nào, mà là tọa độ $(x, y)$ đã được scale theo tỷ lệ từ hình chữ nhật $(left, right, top, bottom)$ sang hình vuông $(-1, -1, 1, 1)$. Vậy ta cần chứng minh tỷ lệ của tọa độ $(x, y)$ trong hình chữ nhật $(left, right, top, bottom)$ bằng với tỷ lệ của tọa độ $(x&rsquo;, y&rsquo;)$ trong hình vuông $(-1, -1, 1, 1)$, trong đó $(x&rsquo;, y&rsquo;)$ là ảnh của $(x, y)$ sau phép biến đổi projective mô tả ở trên. Có hai cách chứng minh:</p><ol><li>Dùng đại số, ta cần thiết lập ma trận biến đổi và hoàn toàn dựa vào các con số để tính toán.</li><li>Dùng hình học, ta cần sử dụng cross ratio. Nhắc lại là, ngoài sự thẳng hàng ra, cross ratio cũng được bảo toàn sau phép biến đổi projective.</li></ol><p>Nếu theo cách 1, để tìm ra ma trận biến đổi $(4\times4)$ ta sẽ sử dụng định lý 2 đã nêu ở trên, cho không gian xạ ảnh. Tức là phải chọn ra 5 điểm trước và 5 điểm sau của phép biến đổi (chú ý là trong số 5 điểm trước không được có 4 điểm nào đồng phẳng). Ví dụ ta có thể chọn 5 điểm trước là: điểm trung tâm, 2 điểm phía trên của mặt phẳng $z = -near$, 2 điểm phía dưới của mặt phẳng $z = -far$. Lần lượt áp dụng chúng vào các phép nhân điểm với ma trận, và giải hệ phương trình. Ví dụ, với phép perspective, phép này biến điểm trung tâm $(0, 0, 0, 1)$ thành $(0, 0, 1, 0)$, ta có ma trận biến đổi là:</p><p>$$\begin{pmatrix}
\frac{2n}{r-l} & 0 & \frac{r+l}{r-l} & 0 \\
0 & \frac{2n}{t-b} & \frac{t+b}{t-b} & 0 \\
0 & 0 & \frac{-(f+n)}{f-n} & \frac{-2fn}{f-n} \\
0 & 0 & -1 & 0
\end{pmatrix}$$</p><p>Trong đó $l, r, t, b, n, f$ lần lượt là viết tắt của $left, right, top, bottom, near, far$.</p><p>Nếu theo cách 2, thì chỉ cần dùng suy luận logic, định lý Thales và sự bảo toàn của tính thẳng hàng và cross ratio. Chứng minh cụ thể xin được dành cho bạn đọc.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on May 19, 2015</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=/posts/2015/05-19-hinh-hoc-xa-anh-p3/ data-hashtag=ProjectiveGeometry><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=/posts/2015/05-19-hinh-hoc-xa-anh-p3/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a><a href="https://t.me/share/url?url=%2fposts%2f2015%2f05-19-hinh-hoc-xa-anh-p3%2f&amp;text=H%c3%acnh%20h%e1%bb%8dc%20x%e1%ba%a1%20%e1%ba%a3nh%20P3" target=_blank title="Share on Telegram"><i class="fab fa-telegram fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/projectivegeometry/>ProjectiveGeometry</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/2015/05-17-hinh-hoc-xa-anh-p2/ class=prev rel=prev title="Hình học xạ ảnh P2"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Hình học xạ ảnh P2</a>
<a href=/posts/2015/11-11-imperative-vs-declarative/ class=next rel=next title="Imperative vs. Declarative">Imperative vs. Declarative<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=disqus_thread class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://disqus.com/?ref_noscript>Disqus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.145.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.1-DEV"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2008 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Nghia</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i></a></div><div id=fixed-buttons-hidden><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css><script src=https://katatunix.disqus.com/embed.js defer></script><script src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.2/sharer.min.js></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/copy-tex.min.js></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/mhchem.min.js></script><script>window.config={comment:{},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script src=/js/theme.min.js></script></body></html>